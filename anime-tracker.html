<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anime Weekly Tracker</title>
<style>
:root{--bg:#0b1220;--card:#111827;--soft:#1f2937;--text:#e5e7eb;--muted:#9ca3af;--accent:#22d3ee;--radius:14px}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui;background:linear-gradient(180deg,#020617,#0b1220);color:var(--text)}
header{position:sticky;top:0;z-index:10;display:flex;justify-content:space-between;align-items:center;padding:14px 16px;background:#020617;border-bottom:1px solid #1f2937}
header .right button{margin-left:8px}
button{border:none;border-radius:999px;padding:8px 14px;background:var(--accent);color:#020617;font-weight:600;cursor:pointer}
button.icon{padding:8px 10px;background:#1f2937;color:#e5e7eb}
.container{max-width:900px;margin:auto;padding:14px}
.day{background:var(--card);border-radius:var(--radius);padding:14px;margin-bottom:14px}
.day.today{outline:1px solid var(--accent)}
.day h3{margin:0 0 10px;font-size:15px;color:#e5e7eb}
.anime{display:flex;justify-content:space-between;align-items:center;background:var(--soft);padding:10px 12px;border-radius:12px;margin:8px 0}
.anime-name{font-size:14px}
.controls{display:flex;gap:6px}
.controls button{padding:6px 10px}
.controls .del{background:#ef4444;color:#fff;margin-left:12px}
.add-box, .search-box{background:var(--card);border-radius:var(--radius);padding:14px;margin-top:20px}
input,select{width:100%;padding:10px;margin:6px 0 10px;border-radius:10px;border:none;background:var(--soft);color:var(--text)}
#toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#020617;padding:10px 14px;border-radius:999px;display:none}
.tabs{display:flex;gap:8px;margin-bottom:14px}
.tab{padding:6px 12px;border-radius:12px;background:var(--soft);cursor:pointer}
.tab.active{background:var(--accent);color:#020617}
.alphabet-list{display:grid;grid-template-columns:repeat(auto-fit,minmax(40px,1fr));gap:6px;margin-top:10px}
.alphabet-list button{padding:6px;background:var(--soft);border-radius:10px;cursor:pointer;width:100%}
</style>
</head>
<body>
<header>
 <strong>ðŸ“… Anime Weekly Tracker</strong>
 <div class="right">
  <button class="icon" onclick="toggleNotifyPanel()">ðŸ””</button>
  <button onclick="requestNotify()">Enable Alerts</button>
 </div>
</header><div class="container search-box">
 <input id="searchInput" placeholder="Search anime..." oninput="searchAnime()">
</div><div class="tabs">
 <div class="tab active" onclick="switchTab('week')">Weekly</div>
 <div class="tab" onclick="switchTab('alpha')">Alphabetical</div>
</div><div class="container" id="app"></div>
<div class="container add-box">
 <h3>âž• Add New Anime</h3>
 <input id="animeName" placeholder="Anime name">
 <input id="animeTotal" type="number" placeholder="Total episodes (optional)">
 <select id="animeDay">
  <option>Monday</option><option>Tuesday</option><option>Wednesday</option>
  <option>Thursday</option><option>Friday</option><option>Saturday</option><option>Sunday</option>
 </select>
 <button onclick="addAnime()">Add Anime</button>
</div><div id="toast"></div><script>
const days=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
const today=days[new Date().getDay()];
let data=JSON.parse(localStorage.getItem('animeData'))||{Monday:[],Tuesday:[],Wednesday:[],Thursday:[],Friday:[],Saturday:[],Sunday:[]};
let undoStack=[];
let currentTab='week';

function save(){localStorage.setItem('animeData',JSON.stringify(data));}
function toast(msg){const t=document.getElementById('toast');t.textContent=msg;t.style.display='block';setTimeout(()=>t.style.display='none',2500)}

function render(){
 const app=document.getElementById('app');app.innerHTML='';
 if(currentTab==='week'){
  Object.keys(data).forEach(day=>{
   const d=document.createElement('div');d.className='day'+(day===today?' today':'');
   d.innerHTML=`<h3>${day}${day===today?' â€¢ Today':''}</h3>`;
   data[day].forEach((a,i)=>{
    const r=document.createElement('div');r.className='anime';
    r.innerHTML=`<div class='anime-name'>${a.name} â€¢ EP ${a.ep}${a.total?` / ${a.total}`:''}</div>
    <div class='controls'>
     <button onclick="updateEp('${day}',${i},-1)">âˆ’</button>
     <button onclick="updateEp('${day}',${i},1)">+</button>
     <button class='del' onclick="removeAnime('${day}',${i})">âœ•</button>
    </div>`;
    d.appendChild(r);
   });
   app.appendChild(d);
  });
 } else {
  // Alphabetical tab
  let allAnime=[];
  Object.keys(data).forEach(day=>allAnime.push(...data[day]));
  allAnime.sort((a,b)=>a.name.localeCompare(b.name));
  const letters=[...new Set(allAnime.map(a=>a.name[0].toUpperCase()))];
  letters.forEach(l=>{
   const div=document.createElement('div');div.innerHTML=`<h4>${l}</h4>`;
   const list=document.createElement('div');list.className='alphabet-list';
   allAnime.filter(a=>a.name[0].toUpperCase()===l).forEach((a,i)=>{
    const btn=document.createElement('button');btn.textContent=a.name+' â€¢ EP '+a.ep;
    btn.onclick=()=>{a.ep++;save();render();};
    list.appendChild(btn);
   });
   div.appendChild(list);app.appendChild(div);
  });
 }
}

function updateEp(day,i,v){data[day][i].ep=Math.max(0,data[day][i].ep+v);save();render();}
function removeAnime(day,i){undoStack.push({day,anime:data[day][i]});data[day].splice(i,1);save();render();toast('Anime removed. Undo?');}
function undoDelete(){if(undoStack.length){const last=undoStack.pop();data[last.day].push(last.anime);save();render();toast('Undo successful');}}
function addAnime(){const n=document.getElementById('animeName').value.trim();if(!n)return;data[document.getElementById('animeDay').value].push({name:n,ep:0,total:+document.getElementById('animeTotal').value||null});document.getElementById('animeName').value=document.getElementById('animeTotal').value='';save();render();}
function searchAnime(){const s=document.getElementById('searchInput').value.toLowerCase();document.querySelectorAll('.anime').forEach(a=>{a.style.display=a.querySelector('.anime-name').textContent.toLowerCase().includes(s)?'flex':'none'});}
function switchTab(tab){currentTab=tab;document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));document.querySelector(`.tab[onclick="switchTab('${tab}')"]`).classList.add('active');render();}
render();
</script></body>
</html>
